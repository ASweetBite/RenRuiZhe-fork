<!DOCTYPE html>
{% load static %}
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文章列表</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/HubStyles.css' %}">
    <link rel="stylesheet" href="{% static 'css/ArticleListStyles.css' %}">
</head>
<body>
<div class="background-gradient"></div>

<main>
    <div class="article-container">
        <div class="articles-header">
            <h2>全部文章</h2>
            <div class="flex-grow"></div>
            {% if current_category or current_subcategory %}
            <div class="selected-category">
                {% if current_category %}{{ current_category }}{% endif %}
                {% if current_subcategory %} > {{ current_subcategory }}{% endif %}
            </div>
            <button class="clear-filter-btn" title="清除筛选">
                <i class="fas fa-times"></i>
            </button>
            {% endif %}
            <div class="category-button">
                <button class="category-btn">文章分类</button>
                <div class="category-dropdown">
                    <div class="category-item">
                        <span class="category-title">开发</span>
                        <div class="sub-category">
                            <button class="sub-category-btn" data-category="开发" data-subcategory="前端">前端</button>
                            <button class="sub-category-btn" data-category="开发" data-subcategory="后端">后端</button>
                            <button class="sub-category-btn" data-category="开发" data-subcategory="移动开发">移动开发</button>
                            <button class="sub-category-btn" data-category="开发" data-subcategory="人工智能">人工智能</button>
                        </div>
                    </div>
                    <div class="category-item">
                        <span class="category-title">文学</span>
                        <div class="sub-category">
                            <button class="sub-category-btn" data-category="文学" data-subcategory="小说">小说</button>
                            <button class="sub-category-btn" data-category="文学" data-subcategory="诗歌">诗歌</button>
                            <button class="sub-category-btn" data-category="文学" data-subcategory="散文">散文</button>
                        </div>
                    </div>
                    <div class="category-item">
                        <span class="category-title">新闻</span>
                        <div class="sub-category">
                            <button class="sub-category-btn" data-category="新闻" data-subcategory="校园新闻">校园新闻</button>
                            <button class="sub-category-btn" data-category="新闻" data-subcategory="科技资讯">科技资讯</button>
                            <button class="sub-category-btn" data-category="新闻" data-subcategory="社会热点">社会热点</button>
                        </div>
                    </div>
                    <div class="category-item">
                        <span class="category-title" data-category="树洞">树洞</span>
                    </div>
                    <div class="category-item">
                        <span class="category-title" data-category="日志">日志</span>
                    </div>
                </div>
            </div>
        </div>

        {% if articles %}
            {% for article in articles %}
                <div class="article-item glass-effect">
                    <img src="{{ article.head_img.url }}" alt="文章图片">
                    <h3 class="article-title"><a href="{% url 'article:detail' article.id %}">{{ article.title }}</a></h3>
                    <div class="article-meta">
                        <span><i class="fas fa-user"></i> 作者: {{ article.author }}</span>
                        <span><i class="far fa-calendar"></i> 发布时间: {{ article.created_time }}</span>
                        <span><i class="fas fa-sync"></i> 最后更新: {{ article.updated_time }}</span>
                    </div>
                    <div class="article-meta">
                        <span><i class="fas fa-heart"></i> 点赞数: {{ article.likes }}</span>
                        <span><i class="fas fa-thumbs-down"></i> 讨厌数: {{ article.dislikes }}</span>
                        <span><i class="fas fa-bookmark"></i> 收藏数: {{ article.collect }}</span>
                        <span><i class="far fa-eye"></i> 浏览数: {{ article.looks }}</span>
                        <span><i class="far fa-comment"></i> 评论数: TODO</span>
                        {% if article.category %}
                        <span><i class="fas fa-tag"></i> 分类: {{ article.category }}{% if article.subcategory %} > {{ article.subcategory }}{% endif %}</span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="no-articles glass-effect">
                <i class="fas fa-search"></i>
                <h3>没有找到相关文章</h3>
                <p>请尝试其他分类或者清除筛选条件</p>
            </div>
        {% endif %}
    </div>
</main>

<script src="{% static 'js/ArticleListJs.js' %}"></script>
</body>
</html>